{"ast":null,"code":"import React,{useState}from'react';import Layout from'../components/layout/Layout';import{useCart}from'../Context/cart';import{useAuth}from'../Context/auth';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const CartPage=()=>{var _auth$user;const[cart,setCart]=useCart();const[auth,setAuth]=useAuth();const navigate=useNavigate();const totalPrice=()=>{let total=0;cart===null||cart===void 0?void 0:cart.map(item=>{{total+=item.price;}});return total.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"});};const removeCartItem=pid=>{try{let myCart=[...cart];let index=myCart.findIndex(item=>item._id===pid);myCart.splice(index,1);setCart(myCart);localStorage.setItem(\"cart\",JSON.stringify(myCart));}catch(error){console.log(error);}};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center bg-light p-2 mb-1\",children:\"Hello \".concat((auth===null||auth===void 0?void 0:auth.token)&&(auth===null||auth===void 0?void 0:auth.user.name))}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-center\",children:(cart===null||cart===void 0?void 0:cart.length)>=1?\"You have \".concat(cart.length,\" item\").concat(cart.length>1?\"s\":\"\",\" in your Cart\"):\"Your cart is empty\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:cart===null||cart===void 0?void 0:cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"row m-2 card flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API,\"/api/v1/product/get-product-photo/\").concat(item._id),className:\"card-img-top\",alt:item.name,style:{height:'15rem'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"p\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[item.description.substring(0,30),\"\".concat((item===null||item===void 0?void 0:item.description.length)>29?\"...\":\"\")]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price : $\",item.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>removeCartItem(item._id),children:\"Remove\"})]})]},item._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cart Summary\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Checkout | Payment | Total\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total: \",totalPrice()]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:auth!==null&&auth!==void 0&&auth.token?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Current Address\"}),/*#__PURE__*/_jsx(\"h5\",{children:auth===null||auth===void 0?void 0:(_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.address}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-warning\",onClick:()=>navigate(\"/dashboard/user/profile\"),children:\"Update Address\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-warning\",onClick:()=>navigate(\"/login\",{state:\"/cart\"}),children:\"Please Login To Checkout\"})})]})]})]})});};export default CartPage;","map":{"version":3,"names":["React","useState","Layout","useCart","useAuth","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CartPage","_auth$user","cart","setCart","auth","setAuth","navigate","totalPrice","total","map","item","price","toLocaleString","style","currency","removeCartItem","pid","myCart","index","findIndex","_id","splice","localStorage","setItem","JSON","stringify","error","console","log","children","className","concat","token","user","name","length","src","process","env","REACT_APP_API","alt","height","description","substring","onClick","address","state"],"sources":["/Users/bhumikamanker/coding_stuff/e-commerce/client/src/pages/CartPage.js"],"sourcesContent":["import React, { useState } from 'react'\nimport Layout from '../components/layout/Layout'\nimport { useCart } from '../Context/cart'\nimport { useAuth } from '../Context/auth'\nimport { useNavigate } from 'react-router-dom'\n\nconst CartPage = () => {\n    const [cart, setCart] = useCart()\n    const [auth, setAuth] = useAuth()\n    const navigate = useNavigate();\n\n    const totalPrice = ()=>{\n        let total = 0\n        cart?.map(item=>{\n            {total+=item.price}\n        })\n\n        return total.toLocaleString(\"en-US\", {\n            style:\"currency\",\n            currency: \"USD\"\n        })\n    }\n    const removeCartItem = (pid) =>{\n        try {\n            let myCart = [...cart]\n            let index = myCart.findIndex(item=>item._id === pid)\n            myCart.splice(index, 1)\n            setCart(myCart)\n            localStorage.setItem(\n                \"cart\",\n                JSON.stringify(myCart)\n            )\n        } catch (error) {\n            console.log(error);\n        }\n    }\n  return (\n    \n    <Layout>\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col-md-12\">  \n                        <h1 className=\"text-center bg-light p-2 mb-1\">\n                        {`Hello ${auth?.token && auth?.user.name}`}\n                        </h1>\n                        <h4 className=\"text-center\">\n                            {\n                                cart?.length >= 1 ?\n                                `You have ${cart.length} item${cart.length>1?\"s\":\"\"} in your Cart`\n                                :\n                                `Your cart is empty`\n                            }\n                        </h4> \n                </div>   \n            </div>\n            <div className=\"row\">\n                <div className=\"col-md-6\">\n                    {\n                        cart?.map(item=>(\n                            <div key={item._id} className=\"row m-2 card flex-row\">\n                                <div className=\"col-md-4\">\n                                    <img src={`${process.env.REACT_APP_API}/api/v1/product/get-product-photo/${item._id}`} className=\"card-img-top\" alt={item.name} style={{height: '15rem'}}/>\n                                </div>\n                                <div className=\"col-md-8\">\n                                    <p>{item.name}</p>\n                                    <p>{item.description.substring(0,30)}{`${item?.description.length > 29 ? \"...\":\"\"}`}</p>\n                                    <p>Price : ${item.price}</p>\n                                    <button className=\"btn btn-danger\" onClick={()=>removeCartItem(item._id)}>Remove</button>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n                <div className=\"col-md-4 text-center\">\n                    <h2>Cart Summary</h2>\n                    <p>Checkout | Payment | Total</p>\n                    <hr />\n                    <h4>Total: {totalPrice()}</h4>\n\n                    <div className=\"mb-3\">\n                        {\n                            auth?.token ?\n                            <>\n                                <h4>Current Address</h4>\n                                <h5>{auth?.user?.address}</h5>\n                                <button \n                                    className=\"btn btn-outline-warning\"\n                                    onClick={()=>navigate(\"/dashboard/user/profile\")}>Update Address\n                                </button>\n                            </>\n                            :\n                            <button \n                                className=\"btn btn-outline-warning\"\n                                onClick={()=>navigate(\"/login\",{\n                                state: `/cart`\n                                })}>Please Login To Checkout\n                            </button>\n                        }\n                        \n                    </div>\n\n                </div>\n                \n            </div>\n        </div>\n\n    </Layout> \n  )\n}\n\nexport default CartPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}