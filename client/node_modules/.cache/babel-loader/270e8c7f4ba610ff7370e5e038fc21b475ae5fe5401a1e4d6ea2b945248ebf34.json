{"ast":null,"code":"import React,{useState,useEffect}from'react';import Layout from'../../components/layout/Layout';import AdminMenu from'../../components/layout/AdminMenu';import toast from'react-hot-toast';import axios from'axios';import{Select}from'antd';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;const CreateProduct=()=>{const[categories,setCategories]=useState([]);const[name,setName]=useState(\"\");const[description,setDescription]=useState(\"\");const[price,setPrice]=useState(\"\");const[category,setCategory]=useState(\"\");const[quantity,setQuantity]=useState(\"\");const[shipping,setShipping]=useState(\"\");const[photo,setPhoto]=useState(\"\");const getAllCategory=async()=>{try{const{data}=await axios.get(\"/api/v1/category/get-category\");if(data!==null&&data!==void 0&&data.success){setCategories(data===null||data===void 0?void 0:data.category);}}catch(error){console.log(error);toast.error(\"something went wrong in getting category\");}};const navigate=useNavigate();const handleCreate=async event=>{event.preventDefault();try{const productData=new FormData();productData.append(\"name\",name);productData.append(\"description\",description);productData.append(\"price\",price);productData.append(\"quantity\",quantity);productData.append(\"photo\",photo);productData.append(\"category\",category);productData.append(\"shipping\",shipping);const{data}=await axios.post(\"/api/v1/product/create-product\",productData);// const productData = new FormData(event.target)\n// const {data} = await axios.post(`/api/v1/category/create-category`, productData, {\n//   headers: {\n//     'Content-Type': 'multipart/form-data' // Important for file uploads\n//   }\n// })\nif(data!==null&&data!==void 0&&data.success){toast.success(\"Product Created Successfully\");navigate(\"/dashboard/admin/products\");}else{toast.error(data===null||data===void 0?void 0:data.message);}}catch(error){console.log(error);}};useEffect(()=>{getAllCategory();//eslint-disable-next-line\n},[]);return/*#__PURE__*/_jsx(Layout,{title:\"Dashboard- Create Product\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid m-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(AdminMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create Product\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleCreate,children:/*#__PURE__*/_jsxs(\"div\",{className:\"m-1 w-75\",children:[/*#__PURE__*/_jsx(Select,{placeholder:\"Select a Category\",size:\"large\",showSearch:true,className:\"form-select mb-3\",onChange:value=>setCategory(value),children:categories===null||categories===void 0?void 0:categories.map(item=>{return/*#__PURE__*/_jsx(Option,{style:{border:'none'},value:item._id,children:item.name},item._id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"btn btn-outline-secondary col-md-12\",children:[photo?photo.name:\"Upload Photo\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"photo\",accept:\"image/*\",onChange:e=>setPhoto(e.target.files[0]),hidden:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:photo&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(photo),alt:\"product_photo\",height:\"200px\",className:\"img img-responsive\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,placeholder:\"write a name\",className:\"form-control\",onChange:e=>setName(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",value:description,placeholder:\"write a description\",className:\"form-control\",onChange:e=>setDescription(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:price,placeholder:\"write a Price\",className:\"form-control\",onChange:e=>setPrice(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:quantity,placeholder:\"write a quantity\",className:\"form-control\",onChange:e=>setQuantity(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Select,{placeholder:\"Select Shipping \",size:\"large\",showSearch:true,className:\"form-select mb-3\",onChange:value=>{setShipping(value);},children:[/*#__PURE__*/_jsx(Option,{value:\"0\",children:\"No\"}),/*#__PURE__*/_jsx(Option,{value:\"1\",children:\"Yes\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"CREATE PRODUCT\"})})]})})]})]})})});};export default CreateProduct;","map":{"version":3,"names":["React","useState","useEffect","Layout","AdminMenu","toast","axios","Select","useNavigate","jsx","_jsx","jsxs","_jsxs","Option","CreateProduct","categories","setCategories","name","setName","description","setDescription","price","setPrice","category","setCategory","quantity","setQuantity","shipping","setShipping","photo","setPhoto","getAllCategory","data","get","success","error","console","log","navigate","handleCreate","event","preventDefault","productData","FormData","append","post","message","title","children","className","onSubmit","placeholder","size","showSearch","onChange","value","map","item","style","border","_id","type","accept","e","target","files","hidden","src","URL","createObjectURL","alt","height"],"sources":["/Users/bhumikamanker/coding_stuff/e-commerce/client/src/pages/Admin/CreateProduct.js"],"sourcesContent":["import React,{useState, useEffect\n} from 'react'\nimport Layout from '../../components/layout/Layout'\nimport AdminMenu from '../../components/layout/AdminMenu'\nimport toast from 'react-hot-toast'\nimport axios from 'axios'\nimport {Select} from 'antd'\nimport { useNavigate } from 'react-router-dom'\n\n\nconst {Option} = Select\nconst CreateProduct = () => {\n  const [categories, setCategories] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [quantity, setQuantity] = useState(\"\");\n  const [shipping, setShipping] = useState(\"\");\n  const [photo, setPhoto] = useState(\"\");\n\n  const getAllCategory = async () => {\n    try {\n        const {data} = await axios.get(`/api/v1/category/get-category`)\n        if(data?.success){\n          setCategories(data?.category)\n        }\n    } catch (error) {\n        console.log(error)\n        toast.error(\"something went wrong in getting category\")\n    }\n  }\n  const navigate = useNavigate();\n  const handleCreate = async (event) => {\n    event.preventDefault()\n    try {\n        const productData = new FormData();\n        productData.append(\"name\", name);\n        productData.append(\"description\", description);\n        productData.append(\"price\", price);\n        productData.append(\"quantity\", quantity);\n        productData.append(\"photo\", photo);\n        productData.append(\"category\", category);\n        productData.append(\"shipping\", shipping);\n        const { data } = await axios.post(\n          `/api/v1/product/create-product`,\n          productData\n        )\n      // const productData = new FormData(event.target)\n      // const {data} = await axios.post(`/api/v1/category/create-category`, productData, {\n      //   headers: {\n      //     'Content-Type': 'multipart/form-data' // Important for file uploads\n      //   }\n      // })\n\n      if (data?.success) {\n        toast.success(\"Product Created Successfully\");\n        navigate(\"/dashboard/admin/products\");\n      } else {\n        toast.error(data?.message);\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  useEffect(()=>{\n    getAllCategory();\n    //eslint-disable-next-line\n  },[])\n  return (\n    <Layout title={\"Dashboard- Create Product\"}>\n        <div className='container-fluid m-3 p-3'>\n          <div className=\"row\">\n              <div className=\"col-md-3\">\n                  <AdminMenu/>\n              </div>    \n              <div className=\"col-md-9\">\n                  <h1>Create Product</h1>\n                  <form onSubmit={handleCreate}>\n                    <div className='m-1 w-75' >\n                      <Select \n                        placeholder=\"Select a Category\" \n                        size='large' \n                        showSearch \n                        className='form-select mb-3' \n                        onChange={(value) => setCategory(value)}>\n                        \n                      {\n                        categories?.map(item => {\n                          return(\n                          <Option style={{ border: 'none' }} key={item._id} value={item._id}>{item.name}</Option>)\n                        })\n                      }\n                      </Select>\n                      <div className=\"mb-3\">\n                        <label className=\"btn btn-outline-secondary col-md-12\">\n                          {photo ? photo.name : \"Upload Photo\"}\n                          <input\n                            type=\"file\"\n                            name=\"photo\"\n                            accept=\"image/*\"\n                            onChange={(e) => setPhoto(e.target.files[0])}\n                            hidden\n                          />\n                        </label>\n                      </div>\n                      <div className=\"mb-3\">\n                        {photo && (\n                          <div className=\"text-center\">\n                            <img\n                              src={URL.createObjectURL(photo)}\n                              alt=\"product_photo\"\n                              height={\"200px\"}\n                              className=\"img img-responsive\"\n                            />\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"mb-3\">\n                        <input\n                        type=\"text\"\n                        value={name}\n                        placeholder=\"write a name\"\n                        className=\"form-control\"\n                        onChange={(e) => setName(e.target.value)}\n                      />\n                      </div>\n                      <div className=\"mb-3\">\n                        <textarea\n                          type=\"text\"\n                          value={description}\n                          placeholder=\"write a description\"\n                          className=\"form-control\"\n                          onChange={(e) => setDescription(e.target.value)}\n                        />\n                      </div>\n                      <div className=\"mb-3\">\n                        <input\n                          type=\"number\"\n                          value={price}\n                          placeholder=\"write a Price\"\n                          className=\"form-control\"\n                          onChange={(e) => setPrice(e.target.value)}\n                        />\n                      </div>\n                      <div className=\"mb-3\">\n                        <input\n                          type=\"number\"\n                          value={quantity}\n                          placeholder=\"write a quantity\"\n                          className=\"form-control\"\n                          onChange={(e) => setQuantity(e.target.value)}\n                        />\n                      </div>\n                      <div className=\"mb-3\">\n                        <Select\n                          placeholder=\"Select Shipping \"\n                          size=\"large\"\n                          showSearch\n                          className=\"form-select mb-3\"\n                          onChange={(value) => {\n                            setShipping(value);\n                          }}\n                        ><Option value=\"0\">No</Option>\n                        <Option value=\"1\">Yes</Option>\n                      </Select>\n                      </div>\n                      <div className=\"mb-3\">\n                        <button className=\"btn btn-primary\" type=\"submit\">CREATE PRODUCT</button>\n                      </div>\n                    </div> \n                  </form>   \n              </div> \n          </div>\n        </div> \n    </Layout>\n  )\n}\n\nexport default CreateProduct"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}