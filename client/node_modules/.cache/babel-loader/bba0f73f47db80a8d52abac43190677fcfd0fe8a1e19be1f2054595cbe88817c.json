{"ast":null,"code":"import React,{useState,useEffect}from'react';import AdminMenu from'../../components/layout/AdminMenu';import Layout from'../../components/layout/Layout';import toast from'react-hot-toast';import axios from'axios';import CategoryForm from'../../components/Form/CategoryForm';import{Modal}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CreateCategory=()=>{const[category,setCategory]=useState([]);const[name,setName]=useState(\"\");const[visible,setVisible]=useState(false);const[selected,setSelected]=useState({});const[updatedName,setUpdatedName]=useState(\"\");const handleSubmit=async event=>{event.preventDefault();try{const{data}=await axios.post(\"\".concat(process.env.REACT_APP_API,\"/api/v1/category/create-category\"),{name});if(data!==null&&data!==void 0&&data.success){console.log(data);toast.success(\"\".concat(data===null||data===void 0?void 0:data.category.name,\" was created\"));setName(\"\");getAllCategory();}else{toast.error(data.message);}}catch(error){console.log(error);toast.error(\"something went wrong in input form\");}};const getAllCategory=async(req,res)=>{try{const{data}=await axios.get(\"\".concat(process.env.REACT_APP_API,\"/api/v1/category/get-category\"));if(data.success){setCategory(data===null||data===void 0?void 0:data.category);}}catch(error){console.log(error);toast.error(\"something went wrong in getting category\");}};useEffect(()=>{getAllCategory();},[]);const handleUpdate=async event=>{event.preventDefault();try{const{data}=await axios.put(\"\".concat(process.env.REACT_APP_API,\"/api/v1/category/update-category/\").concat(selected._id),{name:updatedName});if(data.success){toast.success(\"\".concat(updatedName,\" was updated\"));setSelected({});setUpdatedName(\"\");setVisible(false);getAllCategory();}else{toast.error(data.message);}}catch(error){console.log(error);}};const handleDelete=async id=>{try{const{data}=await axios.delete(\"\".concat(process.env.REACT_APP_API,\"/api/v1/category/delete-category/\").concat(id));if(data.success){toast.success(\"category is deleted\");getAllCategory();}else{toast.error(data.message);}}catch(error){console.log(error);}};return/*#__PURE__*/_jsx(Layout,{title:\"Dashboard - Create Category\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid m-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(AdminMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Manage Category\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-50 p-3\",children:[\" \",/*#__PURE__*/_jsx(CategoryForm,{handleSubmit:handleSubmit,value:name,setName:setName})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-75\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:category===null||category===void 0?void 0:category.map(item=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary ms-2\",onClick:()=>{console.log(item);setVisible(true);setUpdatedName(item.name);setSelected(item);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger ms-2\",onClick:()=>{handleDelete(item._id);},children:\" delete\"})]})]},item._id);})})]})}),/*#__PURE__*/_jsx(Modal,{onCancel:()=>setVisible(false),footer:null,open:visible,children:/*#__PURE__*/_jsx(CategoryForm,{name:updatedName,setName:setUpdatedName,handleSubmit:handleUpdate})})]})]})})});};export default CreateCategory;","map":{"version":3,"names":["React","useState","useEffect","AdminMenu","Layout","toast","axios","CategoryForm","Modal","jsx","_jsx","jsxs","_jsxs","CreateCategory","category","setCategory","name","setName","visible","setVisible","selected","setSelected","updatedName","setUpdatedName","handleSubmit","event","preventDefault","data","post","concat","process","env","REACT_APP_API","success","console","log","getAllCategory","error","message","req","res","get","handleUpdate","put","_id","handleDelete","id","delete","title","children","className","value","scope","map","item","onClick","onCancel","footer","open"],"sources":["/Users/bhumikamanker/coding_stuff/e-commerce/client/src/pages/Admin/CreateCategory.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\nimport AdminMenu from '../../components/layout/AdminMenu'\nimport Layout from '../../components/layout/Layout'\nimport toast from 'react-hot-toast'\nimport axios from 'axios'\nimport CategoryForm from '../../components/Form/CategoryForm'\nimport {Modal} from \"antd\"\n\n\nconst CreateCategory = () => {\n  const [category,setCategory] = useState([])\n  const [name, setName] = useState(\"\")\n  const [visible, setVisible] = useState(false);\n  const [selected, setSelected] = useState({});\n  const [updatedName, setUpdatedName] = useState(\"\");\n\n\n  const handleSubmit = async (event) =>{\n    event.preventDefault()\n    try {\n      const {data} = await axios.post(`${process.env.REACT_APP_API}/api/v1/category/create-category`,{name})\n      if(data?.success){\n        console.log(data)\n        toast.success(`${data?.category.name} was created`)\n        setName(\"\")\n        getAllCategory();\n      }else{\n        toast.error(data.message)\n      }\n    } catch (error) {\n      console.log(error)\n      toast.error(\"something went wrong in input form\")      \n    }\n  }\n  const getAllCategory = async (req, res) => {\n    try {\n        const {data} = await axios.get(`${process.env.REACT_APP_API}/api/v1/category/get-category`)\n        if(data.success){\n          setCategory(data?.category)\n        }\n    } catch (error) {\n        console.log(error)\n        toast.error(\"something went wrong in getting category\")\n    }\n  }\n\n  useEffect(()=>{\n    getAllCategory();\n\n  },[])\n\n  const handleUpdate = async(event) =>{\n    event.preventDefault()\n    try {\n      const {data} = await axios.put(`${process.env.REACT_APP_API}/api/v1/category/update-category/${selected._id}`, {name:updatedName})\n      if(data.success){\n        toast.success(`${updatedName} was updated`)\n        setSelected({})\n        setUpdatedName(\"\")\n        setVisible(false)\n        getAllCategory();\n      }else{\n        toast.error(data.message)\n\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const handleDelete = async(id) =>{\n    try {\n      const {data} = await axios.delete(`${process.env.REACT_APP_API}/api/v1/category/delete-category/${id}`)\n      if(data.success){\n        toast.success(`category is deleted`)\n        getAllCategory();\n      }else{\n        toast.error(data.message)\n\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  return (\n    <Layout title={\"Dashboard - Create Category\"}>\n        <div className='container-fluid m-3 p-3'>\n        <div className=\"row\">\n            <div className=\"col-md-3\">\n                <AdminMenu/>\n            </div>    \n            <div className=\"col-md-9\">\n                <h1>Manage Category</h1>\n                <div className=\"w-50 p-3\"> <CategoryForm handleSubmit={handleSubmit} value={name} setName={setName}/></div>\n                <div className='w-75'>\n                <table className=\"table\">\n                  <thead>\n                    <tr>\n                      <th scope=\"col\">Name</th>\n                      <th scope=\"col\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody> \n                    \n                      {\n                        category?.map(item=> {\n                          return(\n                            <tr key={item._id}>\n                            <td > \n                              {item.name}                              \n                            </td>\n                            <td> <button \n                              className=\"btn btn-primary ms-2\" \n                              onClick={()=>{\n                                console.log(item)\n                                setVisible(true);\n                                setUpdatedName(item.name)\n                                setSelected(item)\n                              }}\n                            >Edit</button>\n                            <button className=\"btn btn-danger ms-2\"\n                              onClick={ () => {handleDelete(item._id)}}> delete</button></td>\n                            </tr>\n                          )\n                        })\n                      }\n                    \n                  </tbody>\n                </table>\n\n                </div>\n                <Modal onCancel={()=>setVisible(false)} footer={null} open={visible} >\n                  <CategoryForm name={updatedName} setName={setUpdatedName} handleSubmit={handleUpdate}/>\n                </Modal>\n            </div>    \n        </div> \n        </div> \n    </Layout>\n  )\n}\n\nexport default CreateCategory"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}