{"ast":null,"code":"import React,{useEffect,useState}from'react';import Layout from'../components/layout/Layout';import axios from'axios';import{useNavigate,useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryProduct=()=>{// const [total, setTotal] = useState(0);\n// const [page, setPage] = useState(1);\n// const [loading, setLoading] = useState(false);\nconst navigate=useNavigate();const[products,setProducts]=useState([]);const[category,setCategory]=useState([]);const params=useParams();// const getTotal = async()=>{\n//     try {\n//         const {data} = await axios.get(`${process.env.REACT_APP_API}/api/v1/product/product-count`)\n//         setTotal(data?.total)\n//         console.log(data.success)\n//         if(data?.success){\n//             setProducts(data.products)\n//         }\n//     } catch (error) {\n//         console.log(error)\n//     }\n// }\nuseEffect(()=>{if(params!==null&&params!==void 0&&params.slug)getProductByCat();},[params===null||params===void 0?void 0:params.slug]);const getProductByCat=async()=>{try{const{data}=await axios.get(\"\".concat(process.env.REACT_APP_API,\"/api/v1/product/product-category/\").concat(params.slug));setProducts(data===null||data===void 0?void 0:data.products);setCategory(data===null||data===void 0?void 0:data.category);}catch(error){console.log(error);}};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9 text-center offset-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:category.name}),/*#__PURE__*/_jsxs(\"h6\",{className:\"text-center\",children:[products===null||products===void 0?void 0:products.length,\" result found \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap\",children:products===null||products===void 0?void 0:products.map(item=>{console.log(item);return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-3\",style:{width:'20rem'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API,\"/api/v1/product/get-product-photo/\").concat(item._id),className:\"card-img-top\",alt:item.name,style:{height:'15rem'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",style:{height:'12rem'},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:item.description.substring(0,30)}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:item.price}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-name-price\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info ms-1\",onClick:()=>{navigate(\"/product-det/\".concat(item.slug));},children:\"More Details\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary ms-1\",children:\"ADD TO CART\"})]})]})]},item._id);})})})})]})});};export default CategoryProduct;","map":{"version":3,"names":["React","useEffect","useState","Layout","axios","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","CategoryProduct","navigate","products","setProducts","category","setCategory","params","slug","getProductByCat","data","get","concat","process","env","REACT_APP_API","error","console","log","children","className","name","length","map","item","style","width","src","_id","alt","height","description","substring","price","onClick"],"sources":["/Users/bhumikamanker/coding_stuff/e-commerce/client/src/pages/CategoryProduct.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Layout from '../components/layout/Layout'\nimport axios from 'axios'\nimport { useNavigate, useParams } from 'react-router-dom'\n\nconst CategoryProduct = () => {\n    // const [total, setTotal] = useState(0);\n    // const [page, setPage] = useState(1);\n    // const [loading, setLoading] = useState(false);\n    const navigate = useNavigate();\n    const [products, setProducts] = useState([])\n    const [category, setCategory] = useState([])\n    const params = useParams();\n\n    // const getTotal = async()=>{\n    //     try {\n    //         const {data} = await axios.get(`${process.env.REACT_APP_API}/api/v1/product/product-count`)\n    //         setTotal(data?.total)\n    //         console.log(data.success)\n    //         if(data?.success){\n    //             setProducts(data.products)\n    //         }\n    //     } catch (error) {\n    //         console.log(error)\n    //     }\n    // }\n\n    useEffect(()=>{\n        if(params?.slug) getProductByCat();  \n    },[params?.slug])\n    const getProductByCat = async()=>{\n        try {\n            const {data} = await axios.get(`${process.env.REACT_APP_API}/api/v1/product/product-category/${params.slug}`)\n            setProducts(data?.products)\n            setCategory(data?.category)\n        } catch (error) {\n            console.log(error)\n        }\n    }\n  return (\n    <Layout>\n        <div className=\"col-md-9 text-center offset-1\">\n                    <h1 className=\"text-center\">{category.name}</h1>\n                    <h6 className=\"text-center\">{products?.length} result found </h6>\n                    <div className=\"row\">\n                    <div className=\"col-md-12\">\n                        <div className=\"d-flex flex-wrap\">\n                        {\n                        products?.map(item => {\n                            console.log(item)\n                            return(\n                                <div className=\"card m-3\" style={{width: '20rem'}}  key={item._id}>\n                                \n                                <img src={`${process.env.REACT_APP_API}/api/v1/product/get-product-photo/${item._id}`} className=\"card-img-top\" alt={item.name} style={{height: '15rem'}}/>\n                                <div className=\"card-body\" style={{height: '12rem'}}>\n                                    <h5 className=\"card-title\">{item.name}</h5>\n                                    <p className=\"card-text\">{item.description.substring(0,30)}</p>\n                                    <p className=\"card-text\">{item.price}</p>\n                                    <div className=\"card-name-price\">\n                                        <button\n                                        className=\"btn btn-info ms-1\"\n                                        onClick={()=>{ navigate(`/product-det/${item.slug}`)}}\n                                        >\n                                        More Details\n                                        </button>\n                                        <button className=\"btn btn-secondary ms-1\">ADD TO CART</button>\n                                    </div>\n                                </div>\n                                </div>\n                            )\n                        })\n                        }\n                    </div>\n                    {/* <div className=\"m-2 p-3\">\n                        {products?.length < total && (\n                            <button className=\"btn btn-warning\"\n                            onClick={(event)=>{\n                                event.preventDefault();\n                                setPage(page+1)\n                            }}>\n                                {loading ? \"Loading...\" : \"loadmore\"}\n                            </button>\n                        )}\n                    </div> */}\n                </div>\n                </div>\n                </div>\n    </Layout>\n  )\n}\n\nexport default CategoryProduct"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}